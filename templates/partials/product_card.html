{% load humanize %}
<div class="flex h-full flex-col">
  <a href="{{ book.get_absolute_url }}" class="group block overflow-hidden rounded-lg border border-slate-100 bg-slate-50">
    {% if book.cover_image %}
    <img src="{{ book.cover_image.url }}" alt="{{ book.title }}" loading="lazy" width="320" height="480" class="aspect-[2/3] w-full object-cover md:group-hover:scale-105 md:transition-transform">
    {% else %}
    <img src="https://via.placeholder.com/320x480?text=Rasm+yo%27q" alt="{{ book.title }}" loading="lazy" width="320" height="480" class="aspect-[2/3] w-full object-cover">
    {% endif %}
  </a>
  <div class="mt-3 flex flex-1 flex-col">
    <a href="{{ book.get_absolute_url }}" class="line-clamp-2 text-sm font-semibold text-slate-900">{{ book.title }}</a>
    <span class="mt-1 text-xs text-slate-500">{{ book.author.name }}</span>
    <div class="mt-3 flex items-center justify-between gap-2">
      <span class="text-base font-bold text-blue-600">{{ book.sale_price|floatformat:0|intcomma }} so'm</span>
      <form method="post" action="{% url 'add_to_cart' book.id %}">
        {% csrf_token %}
        <input type="hidden" name="quantity" value="1">
        <button class="rounded-full border border-blue-600 px-3 py-1 text-xs font-semibold text-blue-600 hover:bg-blue-50" type="submit">Savatga</button>
      </form>
    </div>
  </div>
</div>
