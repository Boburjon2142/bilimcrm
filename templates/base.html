<!DOCTYPE html>
{% load static humanize cache %}
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}BILIM UZ{% endblock %}</title>
  <link rel="icon" type="image/png" href="{% static 'favicon.png' %}">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.17/dist/tailwind.min.css">
  {% block extra_css %}{% endblock %}
</head>
<body class="bg-white text-slate-900 antialiased">
  {% cache 900 navbar request.resolver_match.url_name request.user.is_staff %}
  <header class="sticky top-0 z-40 border-b border-slate-100 bg-white/95 backdrop-blur">
    <div class="mx-auto flex h-14 max-w-6xl items-center justify-between px-4">
      <a href="{% url 'home' %}" class="flex items-center gap-2 text-base font-semibold tracking-tight text-slate-900">
        <svg viewBox="0 0 24 24" class="h-6 w-6 text-blue-600" aria-hidden="true">
          <path fill="currentColor" d="M4 5.5C4 4.12 5.12 3 6.5 3H20v16.5c0 .83-.67 1.5-1.5 1.5H6.5A2.5 2.5 0 0 1 4 18.5v-13Zm2.5 12H18V5H6.5a.5.5 0 0 0-.5.5v12a.5.5 0 0 0 .5.5Z"/>
        </svg>
        <span>BILIM UZ</span>
      </a>
      <nav class="hidden items-center gap-4 text-sm text-slate-600 md:flex">
        {% for category in nav_categories|slice:":6" %}
        <a href="{% url 'category_detail' category.slug %}" class="hover:text-blue-600">{{ category.name }}</a>
        {% endfor %}
      </nav>
      <div class="flex items-center gap-3">
        <a href="{% url 'search' %}" class="inline-flex h-9 w-9 items-center justify-center rounded-full border border-slate-200 text-slate-600 hover:text-blue-600" aria-label="Qidiruv">
          <svg viewBox="0 0 24 24" class="h-4 w-4" aria-hidden="true">
            <path fill="currentColor" d="M10.5 4a6.5 6.5 0 1 1 0 13a6.5 6.5 0 0 1 0-13Zm0 2a4.5 4.5 0 1 0 0 9a4.5 4.5 0 0 0 0-9Zm8.8 12.4l-3-3l1.4-1.4l3 3l-1.4 1.4Z"/>
          </svg>
        </a>
        <a href="{% url 'cart_detail' %}" class="inline-flex h-9 w-9 items-center justify-center rounded-full border border-slate-200 text-slate-600 hover:text-blue-600" aria-label="Savat">
          <svg viewBox="0 0 24 24" class="h-4 w-4" aria-hidden="true">
            <path fill="currentColor" d="M7 6h14l-1.4 7.2a2 2 0 0 1-2 1.6H9.2a2 2 0 0 1-2-1.6L5.1 3H2V1h4l1 5Zm2.2 14a1.8 1.8 0 1 0 0-3.6a1.8 1.8 0 0 0 0 3.6Zm8 0a1.8 1.8 0 1 0 0-3.6a1.8 1.8 0 0 0 0 3.6Z"/>
          </svg>
        </a>
        <a href="{% url 'favorites' %}" class="inline-flex h-9 w-9 items-center justify-center rounded-full border border-slate-200 text-slate-600 hover:text-blue-600" aria-label="Profil">
          <svg viewBox="0 0 24 24" class="h-4 w-4" aria-hidden="true">
            <path fill="currentColor" d="M12 12a4 4 0 1 0-4-4a4 4 0 0 0 4 4Zm0 2c-4.4 0-8 2.2-8 5v2h16v-2c0-2.8-3.6-5-8-5Z"/>
          </svg>
        </a>
        {% if request.user.is_staff and request.resolver_match.url_name != 'home' %}
        <a href="{% url 'crm_dashboard' %}" class="hidden text-xs font-semibold text-slate-500 hover:text-blue-600 md:inline-flex">CRM</a>
        {% endif %}
      </div>
    </div>
    <div class="border-t border-slate-100 md:hidden">
      <div class="flex gap-3 overflow-x-auto px-4 py-2 text-sm text-slate-600">
        {% for category in nav_categories %}
        <a href="{% url 'category_detail' category.slug %}" class="whitespace-nowrap hover:text-blue-600">{{ category.name }}</a>
        {% endfor %}
      </div>
    </div>
  </header>
  {% endcache %}

  <main class="mx-auto max-w-6xl px-4 py-6">
    {% block content %}{% endblock %}
  </main>

  {% cache 1800 footer %}
  <footer class="border-t border-slate-100 py-6 text-sm text-slate-500">
    <div class="mx-auto flex max-w-6xl flex-wrap items-center justify-between gap-2 px-4">
      <span>BILIM UZ</span>
      <span>&copy; {% now "Y" %} Barcha huquqlar himoyalangan</span>
    </div>
  </footer>
  {% endcache %}
  {% block extra_js %}{% endblock %}
</body>
</html>
